toolbox fn CSCopyMachineName = CFStringReftoolbox fn CSCopyUserName( boolean useShortName ) = CFStringRef_FBComputerName  = 0_FBLongUserName  = 1_FBShortUserName = 2local fn FBGetSystemName(type as long) as Str255dim as CFStringRef   aCFdim as Str255        s'~'1aCF = 0 // done to appease gccselect switch typecase _FBComputerName  : aCF = fn CSCopyMachineNamecase _FBLongUserName  : aCF = fn CSCopyUserName( _false )case _FBShortUserName : aCF = fn CSCopyUserName( _true )end selectlong if aCFfn CFStringGetPascalString( aCF, @s, 256, _kCFStringEncodingMacRoman )CFRelease( aCF )end ifend fn = s