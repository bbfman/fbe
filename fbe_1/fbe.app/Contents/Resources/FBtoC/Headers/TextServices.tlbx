#if ndef _DEFINEDINCARBONBEGIN ENUM_kTextService = _"tsvc"/* component type for the component description */_kInputMethodService = _"inpm"/* component subtype for the component description */_kTSMVersion = 0x0150/* Version of the Text Services Manager is 1.5 */END ENUMBEGIN ENUM_kUnicodeDocument = _"udoc"/* TSM Document type for Unicode-savvy application */_kUnicodeTextService = _"utsv"/* Component type for Unicode Text Service */END ENUM/* Language and Script constants*/BEGIN ENUM_kUnknownLanguage = 0xFFFF_kUnknownScript = 0xFFFF_kNeutralScript = 0xFFFFEND ENUMBEGIN ENUM/* Component Flags in ComponentDescription */_bTakeActiveEvent = 15/* bit set if the component takes active event */_bHandleAERecording = 16/* bit set if the component takes care of recording Apple Events <new in vers2.0> */_bScriptMask = 0x00007F00/* bit 8 - 14 */_bLanguageMask = 0x000000FF/* bit 0 - 7  */_bScriptLanguageMask = _bScriptMask+_bLanguageMask/* bit 0 - 14  */END ENUMBEGIN ENUM/* Typing method property constants for Input Methods */_kIMJaTypingMethodProperty = _"jtyp"/* Typing method property for Japanese input methods*/_kIMJaTypingMethodRoman = _"roma"/* Roman typing*/_kIMJaTypingMethodKana = _"kana"/* Kana typing*/END ENUMBEGIN ENUM/* Low level routines which are dispatched directly to the Component Manager */_kCMGetScriptLangSupport = 0x0001/* Component Manager call selector 1 */_kCMInitiateTextService = 0x0002/* Component Manager call selector 2 */_kCMTerminateTextService = 0x0003/* Component Manager call selector 3 */_kCMActivateTextService = 0x0004/* Component Manager call selector 4 */_kCMDeactivateTextService = 0x0005/* Component Manager call selector 5 */_kCMTextServiceEvent = 0x0006/* Component Manager call selector 6 */_kCMGetTextServiceMenu = 0x0007/* Component Manager call selector 7 */_kCMTextServiceMenuSelect = 0x0008/* Component Manager call selector 8 */_kCMFixTextService = 0x0009/* Component Manager call selector 9 */_kCMSetTextServiceCursor = 0x000A/* Component Manager call selector 10 */_kCMHidePaletteWindows = 0x000B/* Component Manager call selector 11 */_kCMGetTextServiceProperty = 0x000C/* Component Manager call selector 12 */_kCMSetTextServiceProperty = 0x000D/* Component Manager call selector 13 */END ENUMBEGIN ENUM/* New low level routines which are dispatched directly to the Component Manager */_kCMUCTextServiceEvent = 0x000E/* Component Manager call selector 14 */END ENUM/* New opaque definitions for types */#DEFINE TSMDocumentID AS pointerbegin record interfaceTypeArraydim InterfaceTypeList0 as ostypedim InterfaceTypeList1 as ostypeend record#DEFINE InterfaceTypeList AS interfaceTypeArray/* Text Service Info List */BEGIN RECORD TextServiceInfoDIM fComponent AS longDIM fItemName AS Str255END RECORD#DEFINE TextServiceInfoPtr AS POINTER' TO TextServiceInfoBEGIN RECORD TextServiceListDIM fTextServiceCount AS short/* number of entries in the 'fServices' array */DIM fServices(1) AS TextServiceInfo/* Note: array of 'TextServiceInfo' records follows */END RECORD#DEFINE TextServiceListPtr AS POINTER 'TO TextServiceList#DEFINE TextServiceListHandle AS POINTER 'TO TextServiceListPtrBEGIN RECORD ScriptLanguageRecordDIM fScript AS ScriptCodeDIM fLanguage AS LangCodeEND RECORDBEGIN RECORD ScriptLanguageSupportDIM fScriptLanguageCount AS short/* number of entries in the 'fScriptLanguageArray' array */DIM fScriptLanguageArray(1) AS ScriptLanguageRecord/* Note: array of 'ScriptLanguageRecord' records follows */END RECORD#DEFINE ScriptLanguageSupportPtr AS POINTER' TO ScriptLanguageSupport#DEFINE ScriptLanguageSupportHandle AS POINTER 'TO ScriptLanguageSupportPtr#endif/* High level TSM Doucment routines */toolbox fn NewTSMDocument( SInt16 numOfInterface, InterfaceTypeList supportedInterfaceTypes, TSMDocumentID *idocID, long refcon ) = OSErrTOOLBOX FN DeleteTSMDocument (TSMDocumentID) = OSErr `0x7001,0xAA54TOOLBOX FN ActivateTSMDocument (TSMDocumentID) = OSErr `0x7002,0xAA54TOOLBOX FN DeactivateTSMDocument (TSMDocumentID) = OSErr `0x7003,0xAA54TOOLBOX FN SetTSMCursor (Point) = Boolean `0x7006,0xAA54TOOLBOX FN FixTSMDocument (TSMDocumentID) = OSErr `0x7007,0xAA54/* Utilities */TOOLBOX FN UseInputWindow (TSMDocumentID,Boolean) = OSErr `0x7010,0xAA54TOOLBOX FN TSMEvent (@EventRecord) = Boolean `0x7004,0xAA54TOOLBOX FN TSMMenuSelect (long) = Boolean `0x7005,0xAA54TOOLBOX FN InitTSMAwareApplication () = OSErr `0x7014,0xAA54TOOLBOX FN CloseTSMAwareApplication () = OSErr `0x7015,0xAA54/* Redundant Utilities */TOOLBOX FN SendAEFromTSMComponent (@AppleEvent,@AppleEvent,AESendMode,AESendPriority,long,long,long) = OSErr `0x700B,0xAA54TOOLBOX FN NewServiceWindow (@LONG,@Rect,str255,Boolean,short,long,Boolean,ComponentInstance,@long) = OSErr `0x7011,0xAA54TOOLBOX FN NewCServiceWindow (@LONG,@Rect,str255,Boolean,short,long,Boolean,ComponentInstance,@long) = OSErr `0x701A,0xAA54TOOLBOX FN CloseServiceWindow (long) = OSErr `0x7012,0xAA54TOOLBOX FN GetFrontServiceWindow (@long) = OSErr `0x7013,0xAA54TOOLBOX FN FindServiceWindow (Point,@long) = short `0x7017,0xAA54TOOLBOX FN SetDefaultInputMethod (Component,@ScriptLanguageRecord) = OSErr `0x700C,0xAA54TOOLBOX FN GetDefaultInputMethod (@Component,@ScriptLanguageRecord) = OSErr `0x700D,0xAA54TOOLBOX FN SetTextServiceLanguage (@ScriptLanguageRecord) = OSErr `0x700E,0xAA54TOOLBOX FN GetTextServiceLanguage (@ScriptLanguageRecord) = OSErr `0x700F,0xAA54/* Component Manager Interfaces to Input Methods */TOOLBOX FN GetScriptLanguageSupport (ComponentInstance,@ScriptLanguageSupportHandle) = ComponentResult `0x2F3C,0x0004,0x0001,0x7000,0xA82ATOOLBOX FN InitiateTextService (ComponentInstance) = ComponentResult `0x2F3C,0x0000,0x0002,0x7000,0xA82ATOOLBOX FN TerminateTextService (ComponentInstance) = ComponentResult `0x2F3C,0x0000,0x0003,0x7000,0xA82ATOOLBOX FN ActivateTextService (ComponentInstance) = ComponentResult `0x2F3C,0x0000,0x0004,0x7000,0xA82ATOOLBOX FN DeactivateTextService (ComponentInstance) = ComponentResult `0x2F3C,0x0000,0x0005,0x7000,0xA82ATOOLBOX FN TextServiceEvent (ComponentInstance,short,@EventRecord) = ComponentResult `0x2F3C,0x0006,0x0006,0x7000,0xA82ATOOLBOX FN UCTextServiceEvent (ComponentInstance,short,@EventRecord,UniChar,UniCharCount) = ComponentResult `0x2F3C,0x000E,0x000E,0x7000,0xA82ATOOLBOX FN GetTextServiceMenu (ComponentInstance,@handle) = ComponentResult `0x2F3C,0x0004,0x0007,0x7000,0xA82ATOOLBOX FN TextServiceMenuSelect (ComponentInstance,handle,short) = ComponentResult `0x2F3C,0x0006,0x0008,0x7000,0xA82ATOOLBOX FN FixTextService (ComponentInstance) = ComponentResult `0x2F3C,0x0000,0x0009,0x7000,0xA82ATOOLBOX FN SetTextServiceCursor (ComponentInstance,Point) = ComponentResult `0x2F3C,0x0004,0x000A,0x7000,0xA82ATOOLBOX FN HidePaletteWindows (ComponentInstance) = ComponentResult `0x2F3C,0x0000,0x000B,0x7000,0xA82ATOOLBOX FN GetServiceList (short,@OSType,@TextServiceListHandle,@long) = OSErr `0x7008,0xAA54TOOLBOX FN OpenTextService (TSMDocumentID,Component,@ComponentInstance) = OSErr `0x7009,0xAA54TOOLBOX FN CloseTextService (TSMDocumentID,ComponentInstance) = OSErr `0x700A,0xAA54TOOLBOX FN GetTextServiceProperty (ComponentInstance,OSType,@long) = ComponentResult `0x2F3C,0x0008,0x000C,0x7000,0xA82ATOOLBOX FN SetTextServiceProperty (ComponentInstance,OSType,long) = ComponentResult `0x2F3C,0x0008,0x000D,0x7000,0xA82A