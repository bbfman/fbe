include "Tlbx CocoaUI.incl"_window = 1_wndW = 650_wndH = 600begin enum 1_customView_quitBtnend enumlocal fn ViewDrawRect'~'1dim as CGRect  viewRectdim as CGContextRef   ctxctx = fn GraphicsCurrentCGContextviewRect = fn ViewBounds( _customView )CGContextSaveGState( ctx )// ---- Background color ------ //CGContextSetRGBFillColor( ctx, 1.0, 1.0, 1.0, 1.0 )CGContextFillRect( ctx, viewRect )// ------ Frame ------ //CGContextSetLineWidth(ctx, 6.0)CGContextSetRGBStrokeColor( ctx, 0.0, 0.0, 0.0, 1.0  )CGContextStrokeRect( ctx, viewRect )CGContextRestoreGState( ctx )end fnlocal fn BuildWindow'~'1dim as SInt32 wndStyleMaskwndStyleMask = NSTitledWindowMaskwndStyleMask += NSClosableWindowMaskwndStyleMask += NSMiniaturizableWindowMaskwndStyleMask += NSResizableWindowMask// **** Window **** //cocoa window _window, @"Test window", ( 0, 0, _wndW, _wndH ), wndStyleMask// **** View **** //view _customView, ( 0, 60, _wndW, _wndH-60 ), _trueViewSetAutoresizingMask( _customView, NSViewWidthSizable + NSViewHeightSizable )// **** Quit Btn **** //cocoa button _quitBtn, , , @"Q", ( _wndW - 50, 10, 40, 40 ),, NSCircularBezelStyleViewSetAutoresizingMask( _quitBtn, NSViewMinXMargin + NSViewMaxYMargin )ControlSetAction( _quitBtn, @"terminate:" )end fnlocal fn DoDialog'~'1dim as long ev, idev = dialog(0)id = dialog(ev)select ( ev )case _btnClickselect ( id )end selectcase _viewDrawRectselect ( id )case _customViewfn ViewDrawRectend selectend selectend fnfn BuildWindowon dialog fn DoDialogHandleEvents